# Aria2 Configuration for NanoPi Download Station

# --- Directories & Files ---
# The directory to store the downloaded file.
dir=/mnt/usb_data/downloads

# Save the session to this file.
input-file=/mnt/usb_data/aria2/aria2.session
save-session=/mnt/usb_data/aria2/aria2.session

# Save session every 60 seconds (Critical for recovery)
save-session-interval=60

# --- Connection ---
# Max connection per server
max-connection-per-server=8
# Continue downloading a partially downloaded file.
continue=true
# Allow overwriting existing files
allow-overwrite=true

# --- RPC Options (Remote Control) ---
enable-rpc=true
rpc-listen-all=true
rpc-allow-origin-all=true
rpc-listen-port=6800
# rpc-secret=YOUR_SECRET_TOKEN (Optional: Uncomment and set for security)

# --- BitTorrent ---
# Enable Local Peer Discovery
bt-enable-lpd=true
# Pre-allocate disk space to reduce fragmentation (takes time on start but better for HDD)
file-allocation=falloc
# Maximum number of peers per torrent
bt-max-peers=55
# Seed ratio (0.0 to disable seeding, or 1.0 to seed until 1:1)
seed-ratio=1.0

# --- Performance ---
# Disk cache (Use 64M to buffer writes before committing to USB)
disk-cache=64M
# Optimize File Allocation (falloc for ext4/xfs, prealloc for others)
file-allocation=falloc
# Increase piece size to reduce disk seeking
min-split-size=20M
# Disable logging to prevent constant disk writes
log-level=warn

